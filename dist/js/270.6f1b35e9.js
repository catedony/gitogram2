"use strict";(self["webpackChunkgitogram"]=self["webpackChunkgitogram"]||[]).push([[270],{8119:function(e,t,i){i.r(t),i.d(t,{default:function(){return he}});var n=i(3396);const s=e=>((0,n.dD)("data-v-5448b412"),e=e(),(0,n.Cn)(),e),a={class:"stories"},r=s((()=>(0,n._)("img",{alt:"Gitogram",src:"GitogramWhite.png"},null,-1))),l={class:"content"};function o(e,t,i,s,o,d){const c=(0,n.up)("router-link"),h=(0,n.up)("Icon"),u=(0,n.up)("Header"),p=(0,n.up)("Slider");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(u,{class:"header"},{topline:(0,n.w5)((()=>[(0,n.Wm)(c,{to:"/"},{default:(0,n.w5)((()=>[r])),_:1}),(0,n.Wm)(c,{to:"/"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"close",class:"icon"})])),_:1})])),_:1}),(0,n._)("div",l,[(0,n.Wm)(p,{initialSlide:+e.$route.params.initialSlide},null,8,["initialSlide"])])])}var d=i(2066),c=i(4704);const h={class:"slider"},u={class:"slider-list",ref:"slider"};function p(e,t,i,s,a,r){const l=(0,n.up)("Slide");return(0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("ul",u,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.data,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{ref_for:!0,ref:"slide",class:"slider-item",key:e.id},[(0,n.Wm)(l,{data:r.getData(e),active:a.slideIndex===t,onNextSlide:e=>r.handleSlide(t+1),onPrevSlide:e=>r.handleSlide(t-1),onProgressFinish:e=>r.handleSlide(t+1),btnsShown:r.activeBtns,loading:a.loading&&t===a.slideIndex},null,8,["data","active","onNextSlide","onPrevSlide","onProgressFinish","btnsShown","loading"])])))),128))],512)])}var v=i(7139);const m={class:"header"},g={class:"content"},f=["innerHTML"],w={class:"footer"};function S(e,t,i,s,a,r){const l=(0,n.up)("Progress"),o=(0,n.up)("AvatarWithTitle"),d=(0,n.up)("Spinner"),c=(0,n.up)("Placeholder"),h=(0,n.up)("ChangeOnHoverButton"),u=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",{class:(0,v.C_)(["slide",{active:i.active}])},[(0,n._)("div",m,[(0,n.Wm)(l,{seconds:20,active:i.active,onFinish:t[0]||(t[0]=t=>e.$emit("progressFinish"))},null,8,["active"]),(0,n.Wm)(o,{src:i.data.userAvatar,title:i.data.username,class:"avatar"},null,8,["src","title"])]),(0,n._)("div",g,[i.loading?((0,n.wg)(),(0,n.j4)(d,{key:0,class:"loader"})):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[i.data.content?.length?((0,n.wg)(),(0,n.iD)("p",{key:0,innerHTML:i.data.content},null,8,f)):((0,n.wg)(),(0,n.j4)(c,{key:1,paragraphs:2}))],64))]),(0,n._)("div",w,[(0,n.Wm)(h)]),i.active?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[i.btnsShown.includes("prev")?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:t[1]||(t[1]=t=>e.$emit("prevSlide")),class:"btn btn-prev"},[(0,n.Wm)(u,{class:"icon",name:"arrowLeft"})])):(0,n.kq)("",!0),i.btnsShown.includes("next")?((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:t[2]||(t[2]=t=>e.$emit("nextSlide")),class:"btn btn-next"},[(0,n.Wm)(u,{class:"icon",name:"arrowRight"})])):(0,n.kq)("",!0)],64)):(0,n.kq)("",!0)],2)}const y={class:"text"},_={class:"hover-text"};function x(e,t,i,s,a,r){return(0,n.wg)(),(0,n.iD)("button",null,[(0,n._)("span",y,(0,v.zw)(i.text),1),(0,n._)("span",_,(0,v.zw)(i.hoverText),1)])}var b={name:"ChangeOnHoverButton",props:{text:{type:String,default:"Follow"},hoverText:{type:String,default:"Unfollow"}}},I=i(7477);const D=(0,I.Z)(b,[["render",x],["__scopeId","data-v-331a9797"]]);var k=D;const W={class:"avatar-with-title"},P={class:"title"};function B(e,t,i,s,a,r){const l=(0,n.up)("Avatar");return(0,n.wg)(),(0,n.iD)("div",W,[(0,n.Wm)(l,{class:"avatar",src:i.src},null,8,["src"]),(0,n._)("span",P,(0,v.zw)(i.title),1)])}var C=i(6012),Z={name:"AvatarWithTitle",components:{Avatar:C.Z},props:{src:{type:String,required:!0},title:{type:String,required:!0}}};const A=(0,I.Z)(Z,[["render",B],["__scopeId","data-v-bd865748"]]);var F=A;const H={class:"progress"};function R(e,t,i,s,a,r){return(0,n.wg)(),(0,n.iD)("div",H,[(0,n._)("div",{ref:"filler",style:(0,v.j5)(a.style),class:"filler"},null,4)])}var T={name:"Progress",props:{seconds:{type:Number,required:!0},active:{type:Boolean,default:!0}},emits:["finish"],data(){return{style:{}}},mounted(){this.active&&setTimeout((()=>{this.style={width:"100%",transition:"all "+this.seconds+"s"}}),0),this.$refs.filler.addEventListener("transitionend",this.emitOnFinish)},beforeUnmount(){this.$refs.filler.removeEventListener("transitionend",this.emitOnFinish)},watch:{active(){this.active&&setTimeout((()=>{this.style={width:"100%",transition:"all "+this.seconds+"s"}}),0)}},methods:{emitOnFinish(){this.$emit("finish")}}};const $=(0,I.Z)(T,[["render",R],["__scopeId","data-v-e035010e"]]);var q=$;const O=e=>((0,n.dD)("data-v-02a2b61a"),e=e(),(0,n.Cn)(),e),L={class:"placeholder"},N=O((()=>(0,n._)("div",{class:"img"},null,-1))),j=O((()=>(0,n._)("div",{class:"line line1"},null,-1))),Y=O((()=>(0,n._)("div",{class:"line line2"},null,-1))),z=[j,Y];function U(e,t,i,s,a,r){return(0,n.wg)(),(0,n.iD)("div",L,[N,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.paragraphs,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"paragraph",key:e},z)))),128))])}var E={name:"Placeholder",props:{paragraphs:{type:Number,default:1}}};const G=(0,I.Z)(E,[["render",U],["__scopeId","data-v-02a2b61a"]]);var K=G;const M={class:"spinner"};function V(e,t){return(0,n.wg)(),(0,n.iD)("div",M)}const X={},J=(0,I.Z)(X,[["render",V],["__scopeId","data-v-c7a9bcf4"]]);var Q=J,ee={name:"Slide",components:{ChangeOnHoverButton:k,AvatarWithTitle:F,Progress:q,Placeholder:K,Spinner:Q,Icon:c.Z},emits:["progressFinish","nextSlide","prevSlide"],props:{data:{type:Object,required:!0},active:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},btnsShown:{type:Array,default:()=>["next","prev"],validator(e){return e.every((e=>"next"===e||"prev"===e))}}}};const te=(0,I.Z)(ee,[["render",S],["__scopeId","data-v-618de948"]]);var ie=te,ne=i(65);const{mapState:se,mapActions:ae}=(0,ne._p)("repositories");var re={name:"Slider",components:{Slide:ie},props:{initialSlide:{type:Number}},data(){return{slideIndex:0,slidePosition:0,loading:!1,showBtns:!0}},computed:{...se(["data"]),activeBtns(){return!1===this.showBtns?[]:0===this.slideIndex?["next"]:this.slideIndex===this.data.length-1?["prev"]:["prev","next"]}},async mounted(){if(this.initialSlide){const e=this.data.findIndex((e=>e.id===this.initialSlide));this.handleSlide(e)}await this.fetchRepositories(),await this.loadReadme()},methods:{...ae(["fetchRepositories","fetchReadme"]),getData(e){return{id:e.id,userAvatar:e.avatarUrl,username:e.author,content:e.content}},async fetchReadmeForActiveSlide(){const{id:e,author:t,name:i}=this.data[this.slideIndex];console.log(e,i,t),await this.fetchReadme({id:e,repo:i,owner:t})},async loadReadme(){this.loading=!0,this.showBtns=!1;try{await this.fetchReadmeForActiveSlide()}catch(e){console.error(e)}finally{this.loading=!1,this.showBtns=!0}},moveSlider(e){const{slide:t,slider:i}=this.$refs;console.log(t[e]);const n=parseInt(getComputedStyle(t[e]).getPropertyValue("width"),10),s=parseInt(getComputedStyle(t[e]).getPropertyValue("margin-right"),10);this.slideIndex=e,this.slidePosition=-(n+s)*this.slideIndex,i.style.transform=`translateX(${this.slidePosition}px)`},async handleSlide(e){this.moveSlider(e),await this.loadReadme()}}};const le=(0,I.Z)(re,[["render",p],["__scopeId","data-v-09e22851"]]);var oe=le,de={name:"Stories",components:{Header:d.Z,Icon:c.Z,Slider:oe}};const ce=(0,I.Z)(de,[["render",o],["__scopeId","data-v-5448b412"]]);var he=ce}}]);
//# sourceMappingURL=270.6f1b35e9.js.map